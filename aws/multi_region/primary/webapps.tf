module "primary-webapps" {
  source = "../webapps"
  primary_aws_region    = "${var.aws_region}"
  faux_aws_region       = "${var.aws_region}"
  zone_name             = "${var.zone_name}"
  num_agents            = "${var.num_agents}"
  agent_instance_type   = "${var.agent_instance_type}"
  num_webapps           = "${var.num_webapps}"
  webapp_instance_type  = "${var.webapp_instance_type}"
  ec2_ami               = "${var.ec2_ami}"
  webapp_subnet_id_1    = "${aws_subnet.kasm-webapp-subnet-1.id}"
  webapp_subnet_id_2    = "${aws_subnet.kasm-webapp-subnet-2.id}"
  agent_subnet_id       = "${aws_subnet.kasm-agent-subnet.id}"
  aws_access_key        = "${var.aws_access_key}"
  aws_secret_key        = "${var.aws_secret_key}"
  aws_domain_name       = "${var.aws_domain_name}"
  project_name          = "${var.project_name}"
  kasm_build            = "${var.kasm_build}"
  database_password     = "${var.database_password}"
  redis_password        = "${var.redis_password}"
  manager_token         = "${var.manager_token}"
  aws_key_pair          = "${var.aws_key_pair}"
  kasm_db_ip            = "${aws_instance.kasm-db.private_ip}"
  primary_vpc_id        = "${aws_vpc.kasm-default-vpc.id}"
  certificate_arn       = "${aws_acm_certificate_validation.kasm-elb-certificate-validation.certificate_arn}"
  ssh_access_cidr       = "${var.ssh_access_cidr}"
}